
# ------------------------------------------------------------------------------------------
# # è®¤è¯† Julia
#
# è¿™ä¸ª notebook ç”¨äºé€Ÿæˆ Julia è¯­æ³•ï¼Œè®©ä½ äº†è§£ Julia æ˜¯å¤šä¹ˆè½»é‡çº§ã€å¤šä¹ˆå¥½ç”¨
# â€”â€” å°±åƒä½ æœ€å–œæ¬¢çš„å…¶ä»–é«˜çº§è¯­è¨€ä¸€æ ·ï¼
#
#
# ## ç›®å½•
# - [å­—ç¬¦ä¸²ï¼ˆStringsï¼‰](#å­—ç¬¦ä¸²)
# - [æ•°æ®ç»“æ„ï¼ˆData structuresï¼‰](#æ•°æ®ç»“æ„)
#     - [å…ƒç»„ï¼ˆTuplesï¼‰](#å…ƒç»„ï¼ˆTuplesï¼‰)
#     - [å­—å…¸ï¼ˆDictionariesï¼‰](#å­—å…¸ï¼ˆDictionariesï¼‰)
#     - [æ•°ç»„ï¼ˆArraysï¼‰](#æ•°ç»„ï¼ˆArraysï¼‰)
# - [å¾ªç¯ï¼ˆLoopsï¼‰](#å¾ªç¯)
#     - [`for` å¾ªç¯](#for-å¾ªç¯)
#     - [`while` å¾ªç¯](#while-å¾ªç¯)
# - [æ¡ä»¶åˆ¤æ–­ï¼ˆConditionalsï¼‰](#æ¡ä»¶åˆ¤æ–­)
#     - [`if` åˆ†æ”¯](#if-åˆ†æ”¯)
#     - [ä¸‰å…ƒè¿ç®—ç¬¦](#ä¸‰å…ƒè¿ç®—ç¬¦)
# - [å‡½æ•°ï¼ˆFunctionsï¼‰](#å‡½æ•°)
#     - [å¦‚ä½•å£°æ˜ä¸€ä¸ªå‡½æ•°](#å¦‚ä½•å£°æ˜ä¸€ä¸ªå‡½æ•°)
#     - [Julia ä¸­çš„é¸­å­ç±»å‹ï¼ˆDuck-typingï¼‰](#Julia-ä¸­çš„é¸­å­ç±»å‹ï¼ˆDuck-typingï¼‰)
#     - [è°ƒç”¨å‡½æ•°](#è°ƒç”¨å‡½æ•°)
#     - [åŸåœ°ä¿®æ”¹ä¸éåŸåœ°ä¿®æ”¹å‡½æ•°ï¼ˆMutating vs. non-mutating functionsï¼‰](#åŸåœ°ä¿®æ”¹ä¸éåŸåœ°ä¿®æ”¹å‡½æ•°ï¼ˆMutating-vs.-non-
# mutating-functionsï¼‰)
#     - [ä¸€äº›é«˜é˜¶å‡½æ•°](#ä¸€äº›é«˜é˜¶å‡½æ•°)
#     - [å¹¿æ’­ï¼ˆbroadcastï¼‰](#å¹¿æ’­ï¼ˆbroadcastï¼‰)
# ------------------------------------------------------------------------------------------

# ------------------------------------------------------------------------------------------
# ## å­—ç¬¦ä¸²
# ------------------------------------------------------------------------------------------

string1 = "How many cats "

string2 = "is too many cats?"

string(string1, string2)

ğŸ˜º = 10
println("I don't know but $ğŸ˜º are too few!")

# ------------------------------------------------------------------------------------------
# æ³¨æ„ï¼šJulia å…è®¸ç”¨ Unicode å­—ç¬¦ï¼Œä¾‹å¦‚ğŸ˜º
#
# è¿™å°±è®©æˆ‘ä»¬å¯ä»¥æŠŠä»£ç å†™æˆè¿™ä¸ªæ ·å­
# ------------------------------------------------------------------------------------------

ğŸ˜º = 1
ğŸ˜€ = 0
ğŸ˜ = -1

ğŸ˜º + ğŸ˜ == ğŸ˜€

# ------------------------------------------------------------------------------------------
# ## æ•°æ®ç»“æ„
# ------------------------------------------------------------------------------------------

# ------------------------------------------------------------------------------------------
# ### å…ƒç»„ï¼ˆTuplesï¼‰
#
# è¦åˆ›å»ºåˆ›å»ºä¸€ä¸ªå…ƒç»„ï¼Œå°±ç”¨å°æ‹¬å·ä¾æ¬¡ `( )` æ‹¬èµ·ä¸€ç³»åˆ—å…ƒç´ 
#
#
# è¯­æ³•ï¼š
# ```julia
# (item1, item2, ...)
# ```
# ------------------------------------------------------------------------------------------

myfavoriteanimals = ("penguins", "cats", "sugargliders")

myfavoriteanimals[1]

# ------------------------------------------------------------------------------------------
# ###  å­—å…¸ï¼ˆDictionariesï¼‰
#
# æƒ³å­˜é”®å€¼å¯¹ï¼Œç”¨å­—å…¸ã€‚é€šè¿‡ `Dict()` æ„é€ å™¨æ¥åˆ›å»ºå­—å…¸ã€‚
#
# è¯­æ³•ï¼š
# ```julia
# Dict(key1 => value1, key2 => value2, ...)
# ```
#
# æ¯”å¦‚ç”µè¯ç°¿éœ€è¦ä¿å­˜äººåå’Œç”µè¯å·ç çš„æˆå¯¹å…³ç³»
# ------------------------------------------------------------------------------------------

myphonebook = Dict("Jenny" => "867-5309", "Ghostbusters" => "555-2368")

myphonebook["Jenny"]

# ------------------------------------------------------------------------------------------
# ### æ•°ç»„ï¼ˆArraysï¼‰
#
# ä¸åŒäºå…ƒç»„ï¼Œæ•°ç»„å¯å˜ï¼›ä¸åŒäºå­—å…¸ï¼Œæ•°ç»„æœ‰åºã€‚
# è¦åˆ›å»ºåˆ›å»ºä¸€ä¸ªæ•°ç»„ï¼Œç”¨æ–¹æ‹¬å·ä¾æ¬¡ `[ ]` æ‹¬èµ·ä¸€ç³»åˆ—å…ƒç´ ã€‚
#
# è¯­æ³•ï¼š
# ```julia
# [item1, item2, ...]
# ```
#
# ä¾‹å¦‚ï¼š
# ------------------------------------------------------------------------------------------

myfriends = ["Ted", "Robyn", "Barney", "Lily", "Marshall"]

fibonacci = [1, 1, 2, 3, 5, 8, 13]

mixture = [1, 1, 2, 3, "Ted", "Robyn"]

# ------------------------------------------------------------------------------------------
# æ•°ç»„å¯ä»¥åŒ…å«å…¶ä»–æ•°æ®ç»“æ„ï¼Œä¹Ÿå¯ä»¥åŒ…å«å…¶ä»–æ•°ç»„å˜æˆé«˜ç»´æ•°ç»„ã€‚
# ------------------------------------------------------------------------------------------

numbers = [[1, 2, 3], [4, 5], [6, 7, 8, 9]]

rand(4, 3)

# ------------------------------------------------------------------------------------------
# ## å¾ªç¯
#
# ### `for` å¾ªç¯
#
# `for` å¾ªç¯è¯­æ³•ï¼š
# ```julia
# for <var> in <loop iterable>
#     <loop body>
# end
# ```
# ------------------------------------------------------------------------------------------

for n in 1:10
    println(n)
end

# ------------------------------------------------------------------------------------------
# ### `while` å¾ªç¯
#
# `while` å¾ªç¯è¯­æ³•ï¼š
# ```julia
# while <condition>
#     <loop body>
# end
# ```
# ------------------------------------------------------------------------------------------

n = 0
while n < 10
    n += 1
    println(n)
end

# ------------------------------------------------------------------------------------------
# ## æ¡ä»¶åˆ¤æ–­
#
# ### `if` åˆ†æ”¯
#
# Julia ä¸­ `if` è¯­æ³•ä¸ºï¼š
#
# ```julia
# if <condition 1>
#     <option 1>
# elseif <condition 2>
#     <option 2>
# else
#     <option 3>
# end
# ```
#
# è¿™è®©æˆ‘ä»¬å¯ä»¥æŒ‰æ¡ä»¶æ‰§è¡Œä¸åŒçš„è¯­å¥
# ------------------------------------------------------------------------------------------

x, y = 1, 2
if x > y
    x
else
    y
end

# ------------------------------------------------------------------------------------------
# ### ä¸‰å…ƒè¿ç®—ç¬¦
#
# æˆ‘ä»¬å¯ä»¥ç”¨ä¸‰å…ƒè¿ç®—ç¬¦è¯­æ³•é‡å†™ä¸Šä¸€ä¸ªä»£ç å—
#
# ```julia
# a ? b : c
# ```
#
# å®ƒç­‰ä»·äº
#
# ```julia
# if a
#     b
# else
#     c
# end
# ```
# ------------------------------------------------------------------------------------------

(x > y) ? x : y

# ------------------------------------------------------------------------------------------
# ## å‡½æ•°
#
# å°†è¦è°ˆè®ºçš„ä¸»é¢˜ï¼š
# 1. å¦‚ä½•å£°æ˜ä¸€ä¸ªå‡½æ•°
# 2. Julia ä¸­çš„é¸­å­ç±»å‹ï¼ˆDuck-typingï¼‰
# 3. åŸåœ°ä¿®æ”¹ä¸éåŸåœ°ä¿®æ”¹å‡½æ•°ï¼ˆMutating vs. non-mutating functionsï¼‰
# 4. é«˜é˜¶å‡½æ•°
#
# ### å¦‚ä½•å£°æ˜ä¸€ä¸ªå‡½æ•°
#
# #### æ–¹æ³•ä¸€ï¼šç”¨ `function` å’Œ `end` å…³é”®å­—
# ------------------------------------------------------------------------------------------

function f(x)
    x^2
end

# ------------------------------------------------------------------------------------------
# #### æ–¹æ³•äºŒï¼šç”¨ `=`
# ------------------------------------------------------------------------------------------

f2(x) = x^2

# ------------------------------------------------------------------------------------------
# #### æ–¹æ³•ä¸‰ï¼šåŒ¿åå‡½æ•°
# ------------------------------------------------------------------------------------------

f3 = x -> x^2

# ------------------------------------------------------------------------------------------
# ### è°ƒç”¨å‡½æ•°
# ------------------------------------------------------------------------------------------

f(42)

f2(42)

f3(42)

# ------------------------------------------------------------------------------------------
# ### Julia ä¸­çš„é¸­å­ç±»å‹ï¼ˆDuck-typingï¼‰
# > *â€œå‡å¦‚å®ƒå˜å˜åƒä¸ªé¸­é¸­ï¼Œé‚£å®ƒå°±æ˜¯ä¸ªé¸­é¸­â€*
#
# åœ¨æœªæŒ‡å®šå‡½æ•°å‚æ•°çš„ç±»å‹æ—¶ï¼Œä¸ç®¡è¾“å…¥å‚æ•°æ˜¯ä»€ä¹ˆç±»å‹ï¼Œåªè¦å‡½æ•°ä½“å¯ä»¥æ­£å¸¸æ‰§è¡Œï¼Œ
# é‚£ä¹ˆ Julia å‡½æ•°å°±å¯ä»¥åº”ç”¨åœ¨è¿™ç§ç±»å‹çš„å‚æ•°ä¸Š
# æ¯”å¦‚ä¸Šé¢çš„ `f` å‡½æ•°å¯ä»¥æ¥å—ä¸€ä¸ªçŸ©é˜µï¼ˆmatrixï¼‰ä½œä¸ºå‚æ•°
# ------------------------------------------------------------------------------------------

A = rand(3, 3)

f(A)

# ------------------------------------------------------------------------------------------
# ç„¶è€Œï¼Œ`f` å‡½æ•°æ— æ³•æ¥å—ä¸€ä¸ªå‘é‡ï¼ˆvectorï¼‰ã€‚
# ä¸åŒäº `A^2` æ˜¯å·²ç»å®šä¹‰å¥½çš„çŸ©é˜µä¹˜æ–¹ï¼Œå½“ `v` æ˜¯å‘é‡æ—¶çš„ `v^2` æ˜¯æœªå®šä¹‰çš„ï¼Œä¼šå¯¼è‡´é”™è¯¯ã€‚
# ------------------------------------------------------------------------------------------

v = rand(3)

f(v)

# ------------------------------------------------------------------------------------------
# ### åŸåœ°ä¿®æ”¹ä¸éåŸåœ°ä¿®æ”¹å‡½æ•°ï¼ˆMutating vs. non-mutating functionsï¼‰
#
# çº¦å®šï¼šå‡½æ•°åä»¥ `!` ç»“æŸçš„åŸåœ°ä¿®æ”¹ä¼ å…¥çš„å˜é‡ï¼Œå‡½æ•°åéä»¥ `!` ç»“æŸçš„åˆ™ä¸ä¼šæ”¹å˜ä¼ å…¥çš„å˜é‡ã€‚
#
# ä¾‹å¦‚ä¸‹é¢çš„ `sort` å’Œ `sort!`
# ------------------------------------------------------------------------------------------

v = [3, 5, 2]

sort(v)

v

# ------------------------------------------------------------------------------------------
# `sort(v)`ä¼šè¿”å›ä¸€ä¸ªæ–°çš„ã€å°† `v` æ’åºåçš„æ•°ç»„ï¼Œ`v` æœ¬èº«ä¸ä¼šæ”¹å˜
#
# è€Œå½“æ‰§è¡Œ `sort!(v)` åï¼Œ`v` å°†ä¼šè¢«åŸåœ°æ’åºä¿®æ”¹
# ------------------------------------------------------------------------------------------

sort!(v)

v

# ------------------------------------------------------------------------------------------
# ### ä¸€äº›é«˜é˜¶å‡½æ•°
#
# #### `map`
#
# `map` æ˜¯ Julia ä¸­çš„é«˜é˜¶å‡½æ•°ã€‚â€œé«˜é˜¶â€æŒ‡çš„æ˜¯å®ƒä¼š*æ¥å—ä¸€ä¸ªå‡½æ•°*ä½œä¸ºå®ƒçš„ä¼ å…¥å‚æ•°ã€‚
# `map` å°†ä¼ å…¥çš„å‡½æ•°ä½œç”¨äºä¼ å…¥çš„æ•°æ®ç»“æ„çš„æ¯ä¸€ä¸ªå…ƒç´ ã€‚ä¾‹å¦‚æ‰§è¡Œ
#
# ```julia
# map(f, [1, 2, 3])
# ```
# å°†å¾—åˆ°ä¸€ä¸ªè¾“å‡ºæ•°ç»„ï¼Œæ•°ç»„çš„æ¯ä¸€ä¸ªå…ƒç´ ä¸º `f` ä½œç”¨åœ¨æ•°ç»„ `[1, 2, 3]` çš„å¯¹åº”å…ƒç´ 
# ```julia
# [f(1), f(2), f(3)]
# ```
# ------------------------------------------------------------------------------------------

map(f, [1, 2, 3])

# ------------------------------------------------------------------------------------------
# è¿™é‡Œæˆ‘ä»¬æŠŠå‘é‡ `[1, 2, 3]` çš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½å¹³æ–¹äº†ï¼Œè€Œä¸æ˜¯å¯¹å‘é‡ `[1, 2, 3]` æœ¬èº«è¿›è¡Œå¹³æ–¹ã€‚
#
# `map` å¯ä»¥æ¥å—åŒ¿åå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œåƒè¿™æ ·
# ------------------------------------------------------------------------------------------

map(x -> x^3, [1, 2, 3])

# ------------------------------------------------------------------------------------------
# è¿™å°±å®Œæˆäº†å¯¹æ•°ç»„ `[1, 2, 3]` æ‰€æœ‰å…ƒç´ ç«‹æ–¹çš„è®¡ç®—ï¼
# ------------------------------------------------------------------------------------------

# ------------------------------------------------------------------------------------------
# ### å¹¿æ’­ï¼ˆbroadcastï¼‰
#
# å¹¿æ’­ï¼ˆ`broadcast`ï¼‰å’Œ `map` ä¸€æ ·ä¹Ÿæ˜¯é«˜é˜¶å‡½æ•°ã€‚
# å¹¿æ’­æ˜¯ä¸€ç§å¹¿ä¹‰åŒ–çš„ `map`ï¼Œæ‰€ä»¥ `map` èƒ½åšçš„å®ƒéƒ½èƒ½åšã€‚å¹¶ä¸æ­¢å¦‚æ­¤ï¼Œå¹¿æ’­çš„è°ƒç”¨æ–¹æ³•å’Œ `map` ä¸€æ ·ã€‚
# ------------------------------------------------------------------------------------------

broadcast(f, [1, 2, 3])

# ------------------------------------------------------------------------------------------
# æˆ‘ä»¬åˆä¸€æ¬¡é€šè¿‡å‡½æ•° `f` æŠŠå‘é‡ `[1, 2, 3]` çš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½å¹³æ–¹äº†
# â€”â€”è¿™æ¬¡æ˜¯ç”¨â€œå¹¿æ’­â€å‡½æ•° `f` çš„æ–¹å¼ï¼
#
# å¹¿æ’­ï¼ˆ`broadcast`ï¼‰æœ‰ä¸ªè¯­æ³•ç³–ï¼šè°ƒç”¨è¦å¹¿æ’­çš„å‡½æ•°æ—¶ï¼Œåœ¨å‡½æ•°åå’Œè¾“å…¥å˜é‡ä¹‹é—´åŠ ä¸€ä¸ª `.`ã€‚
#
# æ¯”å¦‚ï¼š
# ```julia
# broadcast(f, [1, 2, 3])
# ```
# å°±ç­‰ä»·äº
# ```julia
# f.([1, 2, 3])
# ```
# ------------------------------------------------------------------------------------------

f.([1, 2, 3])

# ------------------------------------------------------------------------------------------
# å†ä¸€æ¬¡å¼ºè°ƒ `map` å’Œå¹¿æ’­æ–¹å¼ä¸å¦‚ä¸‹ç›´æ¥è°ƒç”¨å‡½æ•°çš„åŒºåˆ«ã€‚
#
# ```julia
# f([1, 2, 3])
# ```
# æˆ‘ä»¬å¯ä»¥æ±‚å‘é‡ä¸­æ¯ä¸ªå…ƒç´ çš„å¹³æ–¹ï¼Œä½†æ˜¯ä¸èƒ½æ±‚å‘é‡çš„å¹³æ–¹ï¼
# ------------------------------------------------------------------------------------------

# ------------------------------------------------------------------------------------------
# ä¸ºäº†å†è®²æ¸…æ¥šè¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å†çœ‹ä¸€ä¸‹ä»¥ä¸‹è°ƒç”¨çš„åŒºåˆ«
#
# ```julia
# f(A)
# ```
# ä¸
# ```julia
# f.(A)
# ```
# å…¶ä¸­ `A` æ˜¯ä¸ªçŸ©é˜µï¼š
# ------------------------------------------------------------------------------------------

A = [i + 3*j for j in 0:2, i in 1:3]

f(A)

# ------------------------------------------------------------------------------------------
# å’Œä¹‹å‰ä¸€æ ·ï¼Œå¯¹äºçŸ©é˜µ `A` æ¥è¯´
# ```
# f(A) = A^2 = A * A
# ```
#
# å¦ä¸€æ–¹é¢ï¼Œ
# ------------------------------------------------------------------------------------------

B = f.(A)

# ------------------------------------------------------------------------------------------
# ç»“æœåŒ…å«äº†çŸ©é˜µ `A` ä¸­æ¯ä¸ªå…ƒç´ çš„å¹³æ–¹
#
# å¹¿æ’­çš„ç‚¹è¯­æ³•è®©æ¯”è¾ƒå¤æ‚çš„å…ƒç´ é—´è¿ç®—çš„è¡¨ç¤ºæ›´è‡ªç„¶ã€æ›´è´´è¿‘æ•°å­¦è¡¨ç¤ºã€‚
#
# ä¾‹å¦‚ï¼š
# ------------------------------------------------------------------------------------------

C = A .+ 2 .* f.(A) ./ A

# ------------------------------------------------------------------------------------------
# è€Œä¸æ˜¯
# ------------------------------------------------------------------------------------------

broadcast(x -> x + 2 * f(x) / x, A)

# ------------------------------------------------------------------------------------------
# å¹¶ä¸”è¿™ä¹ˆå†™ä»ç„¶èƒ½è·å¾—å’Œ C è¯­è¨€ä¸€æ ·é«˜æ•ˆçš„ä»£ç ï¼
# ------------------------------------------------------------------------------------------
